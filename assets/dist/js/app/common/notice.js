/**
 * @project        dcf
 * @author         Digital Campus Nebraska
 * @website        http://digitalcampus.us/
 * @copyright      Copyright (c) 2018, BSD-3-Clause
 *
 */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(["./uuid-gen"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(require("./uuid-gen")):e.dcfWidgetNotice=t(e.dcfHelperUuidv4)}(void 0,function(e){var t={},o=document.querySelectorAll('[data-widget="notice"]'),i=!!document.querySelector('[id*="unl-widget-fixedBottom-"]');o=[].slice.call(o);var n={notify:["dcf-notice","unl-notice-notify"],success:["dcf-notice","unl-notice-success"],alert:["dcf-notice","unl-notice--alert"],fatal:["dcf-notice","unl-notice--fatal"]},r={current:["uno"],nav:["foo"],fixedBottom:["bar","dcf-fixed","dcf-notice-fixedBottom","dcf-pin-bottom","dcf-pin-right","dcf-pin-left"],fixedBottomLeft:["zoink"]},c={slideInScroll:["baz"],slideUp:["car"]},s=["dcf-absolute","dcf-pin-top","dcf-pin-right","dcf-mt-3","dcf-mr-3","dcf-btn","dcf-btn-tertiary","js-notice-toggle"];function d(e){var t=document.querySelector("main"),o=t.firstElementChild;t.insertBefore(e,o)}function a(e,t,o,i){var n="true"===t.getAttribute("aria-expanded");n?(t.innerText="Expand",o.classList.add("dcf-notice-title-collapse"),i.classList.add("dcf-notice-message-collapse"),localStorage.setItem(e.id,"collapsed")):(t.innerText="Collapse",i.classList.remove("dcf-notice-message-collapse"),o.classList.remove("dcf-notice-title-collapse"),localStorage.setItem(e.id,"expanded")),n=new Boolean(!n),t.setAttribute("aria-expanded",n.toString())}function l(t,o){var i=document.createElement("button");if(s.forEach(function(e){return i.classList.add(e)}),o){var n=t.querySelector(".js-notice-title"),r=t.querySelector(".js-notice-message"),c=r.id||e();if(i.innerText="collapse",i.setAttribute("aria-expanded","true"),!n)return void console.error("Your notice is missing a title.");if(!r)return void console.error("Your notice is missing a message.");n.classList.add("dcf-notice-title"),!r.id&&(r.id=c),i.setAttribute("aria-controls",c),r.classList.add("dcf-notice-message"),i.addEventListener("click",function(){a(t,i,n,r)})}else i.innerText="close",i.addEventListener("click",function(){var e;(e=t).addEventListener("transitionend",function t(o){"max-height"===o.propertyName&&(e.classList.add("dcf-d-none"),e.removeEventListener("transitionend",t),document.querySelector("main").focus())}),e.classList.add("dcf-notice-fixedBottom--close"),localStorage.setItem(e.id,"closed")});t.insertBefore(i,t.firstElementChild)}var f=!1,u=void 0,m=void 0,p=window.matchMedia("(min-width: 480px)"),g={root:null,rootMargin:"0px",threshold:.65},v={root:null,rootMargin:"0px",threshold:.8};function y(e,t){e.forEach(function(e){e.isIntersecting&&e.intersectionRatio>0&&e.intersectionRatio>=t.thresholds[0]&&(c.slideInScroll.forEach(function(t){return e.target.classList.add(t)}),f=!0,t.disconnect())})}function h(e){f||(e.matches?(!1,o.forEach(function(e){(m=new IntersectionObserver(y,v)).observe(e)}),u&&u.disconnect()):(!0,o.forEach(function(e){(u=new IntersectionObserver(y,g)).observe(e)}),m&&m.disconnect()))}function b(e){if(!e.initialized){var t=e.dataset.noticeType,o=e.dataset.location,s="true"===e.dataset.animation,f="true"===e.dataset.collapsible;if(n[t]?n[t].forEach(function(t){return e.classList.add(t)}):n.notify.forEach(function(t){return e.classList.add(t)}),"fixedBottom"===o)if(i)console.error("Only one fixed to bottom notice may exist on a page");else{if(e.id?e.id="unl-widget-fixedBottom--"+e.id:console.error("An id attribute needs to be provided for the fixed to bottom notice to function properly with localStorage"),!f&&"closed"===localStorage.getItem(e.id))return void e.classList.add("dcf-d-none");r[o]&&r[o].forEach(function(t){return e.classList.add(t)}),l(e,f),d(e),i=!0}else r[o]?r[o].forEach(function(t){return e.classList.add(t)}):r.current.forEach(function(t){return e.classList.add(t)}),"nav"===o&&d(e);if(s&&("fixedBottom"===o?c.slideUp.forEach(function(t){return e.classList.add(t)}):"IntersectionObserver"in window&&(e.classList.add("hide-animate"),p.addListener(function(){return h(p)}),h(p))),e.initialized=!0,f&&"collapsed"===localStorage.getItem(e.id)){var u=e.querySelector(".js-notice-title"),m=e.querySelector(".js-notice-message"),g=e.querySelector(".js-notice-toggle");if(!u)return void console.error("Your notice is missing a title.");if(!m)return void console.error("Your notice is missing a message.");a(e,g,u,m)}}}return t.initialize=function(){o.forEach(function(e){b(e)})},t.create=function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",n=arguments[4],r=document.createElement("div"),c=document.createElement("h2"),s=document.createElement("p"),a=Object.keys(o);(r.setAttribute("role","alert"),a.forEach(function(e){r.setAttribute("data-"+e,o[e])}),"string"==typeof e&&(c.innerText=e),"string"==typeof t&&(s.innerText=t),r.appendChild(c),r.appendChild(s),"main"===i&&void 0===n)?d(r):(void 0===n&&(n="afterbegin"),document.querySelector(i).insertAdjacentElement(n,r));b(r)},t});
//# sourceMappingURL=notice.js.map
